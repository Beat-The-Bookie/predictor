<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Predictions 2024-25</title>
  <link rel="icon" type="image/png" href="logo.png">
  <link rel="stylesheet" href="styles.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  <script src="https://unpkg.com/@supabase/supabase-js"></script>
  <script src="scripts.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.14.0/Sortable.min.js"></script>
  <script type="text/javascript"
        src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js">
  </script>
  <script type="text/javascript">
    (function(){
        emailjs.init({
          publicKey: "XmiXoggW_rXm35ZzW",
        });
    })();
  </script>
</head>
<body>
  <header class="banner">
    <img src="logo.png" alt="Logo" width="120" height="50">
  </header>
  <div class="container" id="login-page">
    <div class="row">
      <div class="col-md-6">
        <div class="row">
          <div class="col-4">
            <label for="uname" class="form-label">Email Address</label>
          </div>
          <div class="col-6">
            <input type="text" id="email" class="form-control">
          </div>
        </div>
        <div class="row">
          <div class="col-4">
            <label for="pword" class="form-label">Password</label>
          </div>
          <div class="col-6">
            <label for="pword" class="form-label visually-hidden">Password</label>
            <div class="input-group">
              <input type="password" id="pword" class="form-control" aria-label="Password" />
              <button class="btn btn-outline-secondary" type="button" onclick="togglePassword('pword', this)">
                Show
              </button>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-4">
            <button class="btn btn-primary" onclick="login()">Login</button>
          </div>
          <div class="col-6">
            <button class="btn btn-link" onclick="forgot_password()">Forgotten Password</button>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="row">
          <div class="col-4">
            <label for="reg-email" class="form-label">Email Address</Address></label>
          </div>
          <div class="col-6">
            <input type="text" id="reg-email" class="form-control">
          </div>
        </div>
        <div class="row">
          <div class="col-4">
            <label for="reg-uname" class="form-label">Username</label>
          </div>
          <div class="col-6">
            <input type="text" id="reg-uname" class="form-control">
          </div>
        </div>
        <div class="row">
          <div class="col-4">
            <label for="reg-pword" class="form-label">Password</label>
          </div>
          <div class="col-6">
            <label for="pword" class="form-label visually-hidden">Password</label>
            <div class="input-group">
              <input type="password" id="reg-pword" class="form-control">
              <button class="btn btn-outline-secondary" type="button" onclick="togglePassword('reg-pword', this)">
                Show
              </button>
            </div>  
          </div>
        </div>
        <div class="row">
          <div class="col-4">
            <button type="submit" class="btn btn-primary" onclick="register()" id="reg-btn">Register</button>
          </div>
          <div class="col-6">
            <p>Please note: Your username will be visible to other users, and your randomly
              generated passcode will be sent to the email address.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="container d-none" id="main-page-pre">
    <div class="card">
      <div class="card-header bg-primary text-white">
        Predictions 2024/2025
      </div>
      <div class="card-body">
        <nav class="d-flex align-items-center">
          <div class="nav nav-tabs" id="pre-nav-tab" role="tablist">
            <button class="nav-link active" id="pre-nav-home-tab" type="button" role="tab" onclick="change_tab('pre-nav-home')">Welcome</button>
            <button class="nav-link" id="pre-nav-prem-tab" type="button" role="tab" onclick="change_tab('pre-nav-prem')">Premier League</button>
            <button class="nav-link" id="pre-nav-la_liga-tab" type="button" role="tab" onclick="change_tab('pre-nav-la_liga')">La Liga</button>
            <button class="nav-link" id="pre-nav-champ-tab" type="button" role="tab" onclick="change_tab('pre-nav-champ')">Championship</button>
            <button class="nav-link" id="pre-nav-seriea-tab" type="button" role="tab" onclick="change_tab('pre-nav-seriea')">Serie A</button>
            <button class="nav-link" id="pre-nav-bundes-tab" type="button" role="tab" onclick="change_tab('pre-nav-bundes')">Bundesliga</button>
            <button class="nav-link" id="pre-nav-ligue1-tab" type="button" role="tab" onclick="change_tab('pre-nav-ligue1')">Ligue 1</button>
            <button class="nav-link" id="pre-nav-leaderboard-tab"  type="button" role="tab" onclick="change_tab('pre-nav-leaderboard')">Leaderboard</button>
            <button class="nav-link" id="pre-nav-leagues-tab" type="button" role="tab" onclick="change_tab('pre-nav-leagues')">Leagues</button>
          </div>
          <button class="btn btn-danger ms-auto" onclick="logout()">Logout</button>
        </nav>
        <div class="tab-content" id="nav-tabContent">
          <div class="tab-pane show active" id="pre-nav-home" role="tabpanel" tabindex="0">
            <h2>Welcome to Predictions 2024/2025!</h2>
            <p>Hi, thanks a lot for joining the FootPred beta. This second round of beta testing will be much more interactive than the previous.
              Your first job is to create your predictions, which mean something this time as I will announce a winner at the end of the season.
              The deadline is Sunday 30th March, at 20:00, at the end of the international break. All teams are taken into account for this mini-competition.</p>
            <p>I also need everyone to join and create leagues. This functionality is new and there will likely be bugs. The creator of each league
              picks how many teams to score for in each league. For instance, if your prem limit was 4, only the top 4 teams would be scoring points.
              Whilst this will not be much fun before the deadline, when the deadline passes you will be able to view others' predictions, and the
              scores will be updated regularly.
            </p>
            <p>For any queries, issues, or suggestions, please do not hesitate to email at <a href="mailto:footpredinfo@gmail.com">footpredinfo@gmail.com</a></p>
            <p>Stay tuned! There will be future updates, and more feedback requests!</p>
            <p>All things going well, there should be a release in June 2025</p>
            <div id="referral-section" class="mt-3">
              <p>Your referral link:</p>
              <input id="referral-link" type="text" readonly>
              <button onclick="copyReferral()">Copy</button>
            </div>
          </div>
          <div class="tab-pane" id="pre-nav-prem" role="tabpanel" tabindex="0">
            <div class="row justify-content-around">
              <div class="col-md-6" id="prem-table"></div>
              <div class="col-md-5 list-group" id="prem-pred-table"></div>
              <button class="btn btn-primary" onclick="save_changes('prem')">Save Changes</button>
              <button class="btn btn-danger" onclick="reset_changes('prem')">Cancel Changes</button>
            </div>
          </div>
          <div class="tab-pane" id="pre-nav-la_liga" role="tabpanel" tabindex="0">
            <div class="row justify-content-around">
              <div class="col-md-6" id="la_liga-table"></div>
              <div class="col-md-5 list-group" id="la_liga-pred-table"></div>
              <button class="btn btn-primary" onclick="save_changes('la_liga')">Save Changes</button>
              <button class="btn btn-danger" onclick="reset_changes('la_liga')">Cancel Changes</button>
            </div>
          </div>
          <div class="tab-pane" id="pre-nav-champ" role="tabpanel" tabindex="0">
            <div class="row justify-content-around">
              <div class="col-md-6" id="champ-table"></div>
              <div class="col-md-5 list-group" id="champ-pred-table"></div>
              <button class="btn btn-primary" onclick="save_changes('champ')">Save Changes</button>
              <button class="btn btn-danger" onclick="reset_changes('champ')">Cancel Changes</button>
            </div>
          </div>
          <div class="tab-pane" id="pre-nav-seriea" role="tabpanel" tabindex="0">
            <div class="row justify-content-around">
              <div class="col-md-6" id="seriea-table"></div>
              <div class="col-md-5 list-group" id="seriea-pred-table"></div>
              <button class="btn btn-primary" onclick="save_changes('seriea')">Save Changes</button>
              <button class="btn btn-danger" onclick="reset_changes('seriea')">Cancel Changes</button>
            </div>
          </div>
          <div class="tab-pane" id="pre-nav-bundes" role="tabpanel" tabindex="0">
            <div class="row justify-content-around">
              <div class="col-md-6" id="bundes-table"></div>
              <div class="col-md-5 list-group" id="bundes-pred-table"></div>
              <button class="btn btn-primary" onclick="save_changes('bundes')">Save Changes</button>
              <button class="btn btn-danger" onclick="reset_changes('bundes')">Cancel Changes</button>
            </div>
          </div>
          <div class="tab-pane" id="pre-nav-ligue1" role="tabpanel" tabindex="0">
            <div class="row justify-content-around">
              <div class="col-md-6" id="ligue1-table"></div>
              <div class="col-md-5 list-group" id="ligue1-pred-table"></div>
              <button class="btn btn-primary" onclick="save_changes('ligue1')">Save Changes</button>
              <button class="btn btn-danger" onclick="reset_changes('ligue1')">Cancel Changes</button>
            </div>
          </div>
          <div class="tab-pane" id="pre-nav-leaderboard" role="tabpanel" tabindex="0">
            <div class="row justify-content-around">
              <div class="col-12" id="pre-leaderboard"></div>
            </div>
          </div>
          <div class="tab-pane" id="pre-nav-leagues" role="tabpanel" tabindex="0">
            <div class="row justify-content-around">
              <div class="col-12" id="pre-leagues"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="container d-none" id="main-page-post">
    <div class="card">
      <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
        <div>
          Predictions 2024/2025 - <span id="viewing"></span>
        </div>
        <button id="homeBtn" class="btn btn-light btn-sm d-none" onclick="add_locked_preds()">
          <i class="bi bi-house"></i>
        </button>
      </div>
            <div class="card-body">
        <nav class="d-flex align-items-center">
          <div class="nav nav-tabs" id="post-nav-tab" role="tablist">
            <button class="nav-link active" id="post-nav-home-tab" type="button" role="tab" onclick="change_tab('post-nav-home')">Home</button>
            <button class="nav-link" id="post-nav-prem-tab" type="button" role="tab" onclick="change_tab('post-nav-prem')">Premier League</button>
            <button class="nav-link" id="post-nav-la_liga-tab" type="button" role="tab" onclick="change_tab('post-nav-la_liga')">La Liga</button>
            <button class="nav-link" id="post-nav-champ-tab" type="button" role="tab" onclick="change_tab('post-nav-champ')">Championship</button>
            <button class="nav-link" id="post-nav-seriea-tab" type="button" role="tab" onclick="change_tab('post-nav-seriea')">Serie A</button>
            <button class="nav-link" id="post-nav-bundes-tab" type="button" role="tab" onclick="change_tab('post-nav-bundes')">Bundesliga</button>
            <button class="nav-link" id="post-nav-ligue1-tab" type="button" role="tab" onclick="change_tab('post-nav-ligue1')">Ligue 1</button>
            <button class="nav-link" id="post-nav-leaderboard-tab"  type="button" role="tab" onclick="change_tab('post-nav-leaderboard')">Leaderboard</button>
            <button class="nav-link" id="post-nav-leagues-tab" type="button" role="tab" onclick="change_tab('post-nav-leagues')">Leagues</button>
          </div>
          <button class="btn btn-danger ms-auto" onclick="logout()">Logout</button>
        </nav>
        <div class="tab-content" id="nav-tabContent">
          <div class="tab-pane show active" id="post-nav-home" role="tabpanel" tabindex="0">
            <h3>Welcome to Predictions 2024/2025!</h3>
            <h6>Your current scores!</h6>
            <div id="current-scores"></div>
            <h6>We are now in the post-deadline state, so please take a look! These are the things that have been added:</h6>
            <ul>
              <li>The main leaderboard now takes into account all 20 prem teams, and 6 teams in all other leagues. Previously, it considered all teams in all leagues.</li>
              <li>The leaderboard is sortable by league, or total. Before, it wasn't sorted at all.</li>
              <li>You can now view others' predictions. You can do this by clicking on another user in the leaderboard, or in mini-leagues.</li>
              <li>The current score box above, which will be tidied at some point.</li>
            </ul>
            <h6>Future changes to be made:</h6>
            <ul>
              <li>Currently, you can compare yours', and the other user's predictions. I will change this so that you can also see the standings in future.</li>
              <li>The mini-leagues will be able to be sorted by league. This is not possible until next season as it requires a big database change.</li>
              <li>Presets for mini-league limits.</li>
              <li>The ability for the admin to change the mini-league limits after creation, but before the deadline.</li>
            </ul>
            <p>For any queries, issues, or suggestions, please do not hesitate to email at <a href="mailto:footpredinfo@gmail.com">footpredinfo@gmail.com</a></p>
            <p>Stay tuned! There will be future updates, and more feedback requests!</p>
            <p>All things going well, there should be a proper release in June 2025.</p>
            <p>Please feel free to mention this project to other people. While they can't sign up now, a little bit of excitement would be good for the new season.</p>
          </div>
          <div class="tab-pane" id="post-nav-prem" role="tabpanel" tabindex="0">
            <div class="row justify-content-around">
              <div class="col-md-6" id="prem-pred-locked"></div>
              <div class="col-md-6" id="prem-standings"></div>
            </div>
          </div>
          <div class="tab-pane" id="post-nav-la_liga" role="tabpanel" tabindex="0">
            <div class="row justify-content-around">
              <div class="col-md-6" id="la_liga-pred-locked"></div>
              <div class="col-md-6" id="la_liga-standings"></div>
            </div>
          </div>
          <div class="tab-pane" id="post-nav-champ" role="tabpanel" tabindex="0">
            <div class="row justify-content-around">
          <div class="col-md-6" id="champ-pred-locked"></div>
          <div class="col-md-6" id="champ-standings"></div>
        </div>
      </div>
      <div class="tab-pane" id="post-nav-seriea" role="tabpanel" tabindex="0">
        <div class="row justify-content-around">
          <div class="col-md-6" id="seriea-pred-locked"></div>
          <div class="col-md-6" id="seriea-standings"></div>
        </div>
      </div>
      <div class="tab-pane" id="post-nav-bundes" role="tabpanel" tabindex="0">
        <div class="row justify-content-around">
          <div class="col-md-6" id="bundes-pred-locked"></div>
          <div class="col-md-6" id="bundes-standings"></div>
        </div>
      </div>
      <div class="tab-pane" id="post-nav-ligue1" role="tabpanel" tabindex="0">
        <div class="row justify-content-around">
          <div class="col-md-6" id="ligue1-pred-locked"></div>
          <div class="col-md-6" id="ligue1-standings"></div>
        </div>
      </div>
      <div class="tab-pane" id="post-nav-leaderboard" role="tabpanel" tabindex="0">
        <div class="row justify-content-around">
          <div class="col-12" id="post-leaderboard"></div>
        </div>
      </div>
      <div class="tab-pane" id="post-nav-leagues" role="tabpanel" tabindex="0">
        <div class="row justify-content-around">
          <div class="col-12" id="post-leagues"></div>
        </div>
      </div>
    </div>
  </div>
</body>
</html>